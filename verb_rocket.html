<!-- Chosen Palette: Playful Rocket theme (Blue/Indigo, Deep Orange) for familiar visuals. -->
<!-- Application Structure Plan: Tabbed interface to separate the three distinct conjugation patterns (-ER, -IR, -RE) as required by the user's reference sheet. This structure allows the user to isolate practice for each rule. The core game loop (generate question, select ending, show detailed feedback, proceed on click) is maintained within each tab to reinforce the specific pattern for that verb group. -->
<!-- Visualization & Content Choices: 
    - Full verb lists from the user's reference sheet for each module.
    - Tabbed navigation allows for focused practice sessions.
    - Rocket visual theme is preserved for engagement.
    - Detailed, rule-based feedback (e.g., "-IR verbs use -issons") is crucial for test preparation.
    - NEW: Static conjugation guide table for easy comparison of the three patterns, now including English translations for the pronouns.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Polyglot Rocket - Multi-Verb Practice</title>
    <!-- Load Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for a playful look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; 
            padding: 10px;
        }
        .game-container {
            max-width: 450px;
            width: 100%;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px auto;
            position: relative; /* For the rocket area */
        }
        .tab-button.active {
            border-bottom-color: #ff5722;
            background-color: #ffe0b2; /* Pale Orange */
            color: #ff5722; 
        }
        .tab-button { transition: all 0.2s; border-bottom: 3px solid transparent; }
        .question-box {
            background-color: #e0f7fa; 
            border: 3px solid #00bcd4;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .pronoun {
            font-size: 1.5rem;
            font-weight: bold;
            color: #3f51b5; /* Indigo */
            margin-bottom: 5px;
        }
        .verb-stem {
            font-size: 3rem;
            font-weight: 900;
            color: #ff5722; /* Deep orange */
            letter-spacing: 2px;
            text-shadow: 2px 2px #ffcdd2;
        }
        .choice-button {
            transition: all 0.15s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .choice-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .choice-button:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        @keyframes launch {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-200px); opacity: 0; }
        }
        .launching .rocket-icon {
            animation: launch 0.5s ease-in-out forwards;
        }
        .message-box {
            min-height: 50px;
            font-weight: 700;
            border-radius: 10px;
            margin-top: 15px;
            padding: 10px;
            transition: background-color 0.3s, color 0.3s;
            font-size: 0.9rem;
            text-align: left;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
        }
        .message-box h4 { font-weight: 900; margin-top: 8px; margin-bottom: 4px; font-size: 1.0rem; }
        .message-box ul { list-style-type: disc; margin-left: 20px; font-weight: normal; }
        .score-display {
            background-color: #3f51b5;
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            margin-bottom: 15px;
            display: inline-block;
        }
        .rocket-icon { font-size: 4rem; line-height: 1; transition: transform 0.5s; }
    </style>
</head>
<body>

    <div class="game-container">
        <h1 class="text-3xl font-extrabold tracking-tight">üöÄ The Polyglot Rocket</h1>
        <div class="score-display">Score: <span id="main-score">0</span></div>

        <nav class="flex flex-wrap justify-center border-b border-gray-200 mb-4">
            <button class="tab-button p-3 text-gray-800 font-semibold active" onclick="app.switchTab('guide')">Conjugation Guide</button>
            <button class="tab-button p-3 text-gray-800 font-semibold" onclick="app.switchTab('er')">-ER Verbs</button>
            <button class="tab-button p-3 text-gray-800 font-semibold" onclick="app.switchTab('ir')">-IR Verbs</button>
            <button class="tab-button p-3 text-gray-800 font-semibold" onclick="app.switchTab('re')">-RE Verbs</button>
        </nav>

        <!-- CONJUGATION GUIDE CONTENT -->
        <div id="guide-content" class="tab-content">
            <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">Reference: Regular Conjugation Patterns</h2>
            <p class="text-gray-600 mb-4 text-sm text-center">To conjugate, **chop off the -er, -ir, or -re** ending, and add the appropriate ending below.</p>
            
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-300">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="py-2 px-1 text-xs font-semibold text-gray-700">Who?</th>
                            <th class="py-2 px-1 text-xs font-semibold text-red-600">-ER (e.g., parler)</th>
                            <th class="py-2 px-1 text-xs font-semibold text-green-600">-IR (e.g., finir)</th>
                            <th class="py-2 px-1 text-xs font-semibold text-blue-600">-RE (e.g., vendre)</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 text-center text-sm">
                        <tr>
                            <td class="py-2 px-1 font-medium">Je <span class="text-gray-500 font-normal block">(I)</span></td>
                            <td class="py-2 px-1 text-red-600">parl<strong>e</strong></td>
                            <td class="py-2 px-1 text-green-600">fin<strong>is</strong></td>
                            <td class="py-2 px-1 text-blue-600">vend<strong>s</strong></td>
                        </tr>
                        <tr>
                            <td class="py-2 px-1 font-medium">Tu <span class="text-gray-500 font-normal block">(You)</span></td>
                            <td class="py-2 px-1 text-red-600">parl<strong>es</strong></td>
                            <td class="py-2 px-1 text-green-600">fin<strong>is</strong></td>
                            <td class="py-2 px-1 text-blue-600">vend<strong>s</strong></td>
                        </tr>
                        <tr>
                            <td class="py-2 px-1 font-medium">Il/Elle/On <span class="text-gray-500 font-normal block">(He/She/It)</span></td>
                            <td class="py-2 px-1 text-red-600">parl<strong>e</strong></td>
                            <td class="py-2 px-1 text-green-600">fin<strong>it</strong></td>
                            <td class="py-2 px-1 text-blue-600">vend<strong>‚Äî</strong></td>
                        </tr>
                        <tr>
                            <td class="py-2 px-1 font-medium">Nous <span class="text-gray-500 font-normal block">(We)</span></td>
                            <td class="py-2 px-1 text-red-600">parl<strong>ons</strong></td>
                            <td class="py-2 px-1 text-green-600">fin<strong>issons</strong></td>
                            <td class="py-2 px-1 text-blue-600">vend<strong>ons</strong></td>
                        </tr>
                        <tr>
                            <td class="py-2 px-1 font-medium">Vous <span class="text-gray-500 font-normal block">(You all)</span></td>
                            <td class="py-2 px-1 text-red-600">parl<strong>ez</strong></td>
                            <td class="py-2 px-1 text-green-600">fin<strong>issez</strong></td>
                            <td class="py-2 px-1 text-blue-600">vend<strong>ez</strong></td>
                        </tr>
                        <tr>
                            <td class="py-2 px-1 font-medium">Ils/Elles <span class="text-gray-500 font-normal block">(They)</span></td>
                            <td class="py-2 px-1 text-red-600">parl<strong>ent</strong></td>
                            <td class="py-2 px-1 text-green-600">fin<strong>issent</strong></td>
                            <td class="py-2 px-1 text-blue-600">vend<strong>ent</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>


        <!-- ER Quiz Content -->
        <div id="er-content" class="tab-content hidden">
            <div id="er-quiz-ui"></div>
        </div>
        <!-- IR Quiz Content -->
        <div id="ir-content" class="tab-content hidden">
            <div id="ir-quiz-ui"></div>
        </div>
        <!-- RE Quiz Content -->
        <div id="re-content" class="tab-content hidden">
            <div id="re-quiz-ui"></div>
        </div>
    </div>

    <!-- Conjugation Tracker -->
    <div class="game-container" id="tracker-container">
        <h3 class="font-bold text-xl text-indigo-700 mb-2">üí° Practice Tracker (Mistakes by Pronoun)</h3>
        <div id="error-list" class="grid grid-cols-2 gap-x-4 gap-y-1 text-base">
            <!-- Tracker items will go here -->
        </div>
        <p class="text-xs text-gray-500 mt-2">Focus on the pronouns with the highest numbers!</p>
    </div>

    <script>
        const app = {
            state: {
                currentQuestion: null,
                score: 0,
                errorTracker: {
                    "je": 0, "tu": 0, "il/elle/on": 0, "nous": 0, "vous": 0, "ils/elles": 0
                },
                pronouns: [
                    { text: 'Je', key: 'je', ending: { er: 'e', ir: 's', re: 's' } },
                    { text: 'Tu', key: 'tu', ending: { er: 'es', ir: 's', re: 's' } },
                    { text: 'Il', key: 'il/elle/on', ending: { er: 'e', ir: 't', re: '' } },
                    { text: 'Elle', key: 'il/elle/on', ending: { er: 'e', ir: 't', re: '' } },
                    { text: 'Nous', key: 'nous', ending: { er: 'ons', ir: 'issons', re: 'ons' } },
                    { text: 'Vous', key: 'vous', ending: { er: 'ez', ir: 'issez', re: 'ez' } },
                    { text: 'Ils', key: 'ils/elles', ending: { er: 'ent', ir: 'issent', re: 'ent' } },
                    { text: 'Elles', key: 'ils/elles', ending: { er: 'ent', ir: 'issent', re: 'ent' } },
                    // Complex Subjects (using original quiz concepts for review)
                    { text: 'La fille', key: 'il/elle/on', ending: { er: 'e', ir: 't', re: '' }, info: '(Singular)' },
                    { text: 'Mamie et papy', key: 'ils/elles', ending: { er: 'ent', ir: 'issent', re: 'ent' }, info: '(Plural)' },
                    { text: 'L\'√©quipe', key: 'il/elle/on', ending: { er: 'e', ir: 't', re: '' }, info: '(Singular)' },
                ],
            },
            
            // Verbs sourced from the user's uploaded reference sheet
            verbs: {
                er: [
                    { fr: 'arriver', en: 'to arrive' }, { fr: 'acheter', en: 'to buy' }, { fr: 'changer', en: 'to change' },
                    { fr: 'rentrer', en: 'to come home' }, { fr: 'consulter', en: 'to consult' }, { fr: 'manger', en: 'to eat' },
                    { fr: 'trouver', en: 'to find' }, { fr: 'donner', en: 'to give' }, { fr: 'aider', en: 'to help' },
                    { fr: 'garder', en: 'to keep' }, { fr: 'aimer', en: 'to love/like' }, { fr: '√©couter', en: 'to listen to' },
                    { fr: 'chercher', en: 'to look for/get' }, { fr: 'jouer', en: 'to play' }, { fr: 'chanter', en: 'to sing' },
                    { fr: 'fumer', en: 'to smoke' }, { fr: 'commencer', en: 'to start' }, { fr: '√©tudier', en: 'to study' },
                    { fr: 'nager', en: 'to swim' }, { fr: 'voyager', en: 'to travel' }, { fr: 'laver', en: 'to wash' },
                    { fr: 'gagner', en: 'to win' }, { fr: 'travailler', en: 'to work' }
                ],
                ir: [
                    { fr: 'choisir', en: 'to choose' }, { fr: 'finir', en: 'to finish' }, { fr: 'grossir', en: 'to gain weight' },
                    { fr: 'grandir', en: 'to grow, grow up' }, { fr: 'maigrir', en: 'to lose weight' }, { fr: 'punir', en: 'to punish' },
                    { fr: 'r√©agir', en: 'to react' }, { fr: 'r√©fl√©chir', en: 'to think about' }, { fr: 'r√©ussir', en: 'to succeed/pass' } 
                ],
                re: [
                    { fr: 'r√©soudre', en: 'to resolve' }, { fr: 'descendre', en: 'to descend' }, { fr: 'entendre', en: 'to hear' },
                    { fr: 'perdre', en: 'to lose' }, { fr: 'vendre', en: 'to sell' }, { fr: 'prendre', en: 'to take' },
                    { fr: 'attendre', en: 'to wait' } 
                ]
            },

            init() {
                this.loadQuiz('er');
                this.loadQuiz('ir');
                this.loadQuiz('re');
                this.renderErrorTracker();
                this.switchTab('guide'); // Start on the GUIDE tab
            },

            switchTab(verbType) {
                document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
                document.querySelectorAll('.tab-button').forEach(el => el.classList.remove('active'));
                
                document.getElementById(`${verbType}-content`).classList.remove('hidden');
                document.querySelector(`.tab-button[onclick="app.switchTab('${verbType}')"]`).classList.add('active');
                
                // Only load quiz questions if not on the guide tab
                if (verbType !== 'guide') {
                    this.loadNextQuestion(verbType);
                }
            },

            getVerbInfo(verbType) {
                const info = {};
                if (verbType === 'er') {
                    info.endings = { je: 'e', tu: 'es', illelleon: 'e', nous: 'ons', vous: 'ez', illelles: 'ent' };
                    info.type = '-ER';
                } else if (verbType === 'ir') {
                    info.endings = { je: 's', tu: 's', illelleon: 't', nous: 'issons', vous: 'issez', illelles: 'issent' };
                    info.type = '-IR';
                } else {
                    info.endings = { je: 's', tu: 's', illelleon: '', nous: 'ons', vous: 'ez', illelles: 'ent' };
                    info.type = '-RE';
                }
                return info;
            },

            generateOptions(correctEnding, verbType) {
                const info = this.getVerbInfo(verbType);
                const allEndings = Object.values(info.endings).filter(e => e !== undefined && e !== null);
                
                let incorrects = [];
                let pool = Array.from(new Set(allEndings));
                
                while (incorrects.length < 3) {
                    const candidate = pool[Math.floor(Math.random() * pool.length)];
                    if (candidate !== correctEnding && !incorrects.includes(candidate)) {
                        incorrects.push(candidate);
                    }
                    if (pool.length <= 1) break; 
                }

                let options = [correctEnding, ...incorrects].slice(0, 4);
                if (options.length < 4 && !options.includes(correctEnding)) options.push(correctEnding);

                return options.sort(() => Math.random() - 0.5);
            },

            loadQuiz(verbType) {
                const verbsList = this.verbs[verbType];
                const randomVerb = verbsList[Math.floor(Math.random() * verbsList.length)];
                const randomPronoun = this.state.pronouns[Math.floor(Math.random() * this.state.pronouns.length)];
                
                // Determine stem: remove 2 letters unless verb is prendre, which is 4 letters
                let stemLengthToRemove = 2; 
                if (verbType === 're' && (randomVerb.fr.endsWith('prendre') || randomVerb.fr.endsWith('attendre') || randomVerb.fr.endsWith('entendre'))) {
                    // prendre, attendre, entendre, etc. are 4-letter stems ending in D/T/ND.
                    stemLengthToRemove = 4;
                }
                
                const stem = randomVerb.fr.slice(0, randomVerb.fr.length - stemLengthToRemove);
                
                const info = this.getVerbInfo(verbType);
                const correctEnding = info.endings[randomPronoun.key] || '';
                const correctAnswer = stem + correctEnding;

                this.state.currentQuestion = {
                    verb: randomVerb,
                    pronoun: randomPronoun,
                    stem: stem,
                    correctAnswer: correctAnswer,
                    verbType: verbType,
                    correctEnding: correctEnding,
                    options: this.generateOptions(correctEnding, verbType)
                };
                
                this.renderQuizUI(verbType);
            },

            renderQuizUI(verbType) {
                const q = this.state.currentQuestion;
                const container = document.getElementById(`${verbType}-quiz-ui`);
                const fullVerb = q.verb.fr.toUpperCase();
                const subjectDisplay = q.pronoun.text.toUpperCase() + (q.pronoun.info ? ` ${q.pronoun.info}` : '');
                
                let optionsHTML = q.options.map(ending => {
                    const display = ending === '' ? '‚Äì (Nothing)' : ending.toUpperCase();
                    const fullWord = q.stem + ending;
                    return `
                        <button class="choice-button p-3 text-xl font-bold rounded-full text-white bg-indigo-500 hover:bg-indigo-600" 
                                data-ending="${ending}" 
                                onclick="app.checkAnswer('${verbType}', this)">
                            <span class="text-xs font-normal text-gray-200">${q.stem.toUpperCase()}</span>
                            <span class="text-2xl">${display}</span>
                        </button>
                    `;
                }).join('');

                container.innerHTML = `
                    <div class="question-box">
                        <div id="rocket-area-${verbType}" class="flex flex-col items-center">
                            <div class="rocket-icon">
                                <span id="rocket-emoji-${verbType}">üöÄ</span>
                            </div>
                            <p class="pronoun" id="current-subject-${verbType}">${subjectDisplay}</p>
                            <p class="text-xl text-gray-700 font-bold mb-2">(${fullVerb}: ${q.verb.en})</p>
                            <p class="verb-stem" id="verb-stem-${verbType}">${q.stem.toUpperCase()}</p>
                        </div>
                    </div>

                    <div id="choice-buttons-${verbType}" class="grid grid-cols-3 gap-3">
                        ${optionsHTML}
                    </div>

                    <div id="message-${verbType}" class="message-box bg-gray-100 text-gray-700">Choose the ending to launch the rocket!</div>
                    
                    <button id="next-question-btn-${verbType}" class="mt-4 p-3 w-full bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:bg-pink-600 transition hidden" 
                            onclick="app.loadNextQuestion('${verbType}')">
                        Launch Next Rocket! ‚û°Ô∏è
                    </button>
                `;
            },

            checkAnswer(verbType, button) {
                const q = this.state.currentQuestion;
                const selectedEnding = button.dataset.ending;
                const correctEnding = q.correctEnding;
                const isCorrect = selectedEnding === correctEnding;
                const messageBox = document.getElementById(`message-${verbType}`);
                const nextButton = document.getElementById(`next-question-btn-${verbType}`);

                // Disable all buttons
                document.querySelectorAll(`#choice-buttons-${verbType} button`).forEach(btn => btn.disabled = true);

                let explanationContent = this.buildRuleExplanation(q, selectedEnding, isCorrect);
                
                // --- Visual Feedback ---
                if (isCorrect) {
                    this.state.score++;
                    document.getElementById('main-score').textContent = this.state.score;
                    messageBox.className = "message-box bg-green-100 text-green-700";
                    document.getElementById(`rocket-area-${verbType}`).classList.add('launching');
                } else {
                    this.state.errorTracker[q.pronoun.key]++;
                    this.renderErrorTracker();
                    messageBox.className = "message-box bg-red-100 text-red-700";
                    
                    // Highlight selected (wrong) and correct button
                    button.className = "choice-button p-3 text-xl font-bold rounded-full text-white bg-red-500";
                    const correctButton = document.querySelector(`[data-ending="${correctEnding}"]`);
                    if (correctButton) {
                        correctButton.className = "choice-button p-3 text-xl font-bold rounded-full text-white bg-green-500 animate-pulse";
                    }
                }
                
                messageBox.innerHTML = explanationContent;
                nextButton.classList.remove('hidden');
            },

            buildRuleExplanation(q, selectedEnding, isCorrect) {
                const verbType = q.verbType;
                const endingText = q.correctEnding.toUpperCase() || '‚Äî';
                const fullFrench = q.pronoun.text.toUpperCase() + ' ' + q.stem.toUpperCase() + endingText;
                const simpleSubject = q.pronoun.text.toUpperCase();
                const infinitive = q.verb.fr.toLowerCase();
                
                // Logic to get English translation
                const baseTranslation = this.verbs[verbType].find(v => v.fr === infinitive)?.en || `[${infinitive}]`;
                let translation = baseTranslation.replace('to ', '');
                
                // Handle English conjugation for the explanation
                if (q.pronoun.key === 'je') { translation = 'I ' + translation; }
                else if (q.pronoun.key === 'tu') { translation = 'You ' + translation; }
                else if (q.pronoun.key === 'nous') { translation = 'We ' + translation; }
                else if (q.pronoun.key === 'vous') { translation = 'You all ' + translation; }
                else if (q.pronoun.key === 'il/elle/on') { translation = 'He/She/It ' + translation + (translation.endsWith('s') ? '' : 's'); }
                else if (q.pronoun.key === 'ils/elles') { translation = 'They ' + translation; }


                let explanation = '';

                // Part 1: Correctness and Translation
                if (isCorrect) {
                    explanation += `<p class="text-xl">‚úÖ C'est correct! (${translation})</p>`;
                } else {
                    explanation += `<p class="text-xl">‚ùå Incorrect! The correct conjugation is **${fullFrench}**.</p>`;
                }
                
                // Part 2: Core Rule
                explanation += `<h4 class="text-indigo-700 mt-2">Core Rule for ${q.pronoun.text}:</h4>`;
                explanation += `<p>For **${q.pronoun.text}** (key: ${q.pronoun.key.toUpperCase()}), the **${verbType.toUpperCase()}** verb requires the unique ending: **-${endingText}**.</p>`;

                // Part 3: Other Endings Context
                explanation += `<h4 class="text-indigo-700 mt-2">Context (Why other endings were wrong):</h4><ul>`;
                
                const info = this.getVerbInfo(verbType);
                
                q.options.forEach(ending => {
                    const isTheCorrectEnding = ending === q.correctEnding;
                    const style = isTheCorrectEnding ? 'text-green-700 font-bold' : 'text-red-700';

                    const pronounsUsingEnding = Object.keys(info.endings)
                        .filter(pKey => info.endings[pKey] === ending)
                        .map(pKey => {
                            // Map conjugation key back to user-friendly pronoun display
                            if (pKey === 'il/elle/on') return 'IL, ELLE, ON';
                            if (pKey === 'ils/elles') return 'ILS, ELLES';
                            return pKey.toUpperCase();
                        })
                        .join(', ');

                    explanation += `<li class="${style}">Ending **-${ending.toUpperCase() || '‚Äî'}**: Used for **${pronounsUsingEnding}**.</li>`;
                });
                
                explanation += `</ul>`;
                return explanation;
            },

            renderErrorTracker() {
                const errorList = document.getElementById('error-list');
                errorList.innerHTML = '';
                
                const sortedErrors = Object.entries(this.state.errorTracker)
                    .map(([pronoun, count]) => ({ pronoun: pronoun.toUpperCase().replace('/', ' / '), count }))
                    .sort((a, b) => b.count - a.count);

                sortedErrors.forEach(item => {
                    const itemDiv = document.createElement('div');
                    const textColor = item.count > 0 ? 'text-red-600 font-bold' : 'text-gray-600';
                    itemDiv.className = `flex justify-between ${textColor} border-b border-indigo-200 pb-1`;
                    
                    itemDiv.innerHTML = `<span class="pr-2">${item.pronoun}:</span><span>${item.count}</span>`;
                    errorList.appendChild(itemDiv);
                });
            },

            loadNextQuestion(verbType) {
                document.getElementById(`message-${verbType}`).classList.remove('bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
                document.getElementById(`message-${verbType}`).classList.add('bg-gray-100', 'text-gray-700');
                document.getElementById(`message-${verbType}`).innerHTML = 'Choose the ending to launch the rocket!';

                document.getElementById(`next-question-btn-${verbType}`)?.classList.add('hidden');
                document.getElementById(`rocket-area-${verbType}`)?.classList.remove('launching');
                this.state.isProcessing = false;

                // Delay loading slightly to allow animation reset
                setTimeout(() => this.loadQuiz(verbType), 50);
            }
        };

        window.onload = function() {
            app.init();
        };

    </script>
</body>
</html>
